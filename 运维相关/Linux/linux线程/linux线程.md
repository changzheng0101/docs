# 基本概念

* 一个进程包含很多个线程
* 线程是系统进行资源调度的最小单位
* 多个线程除了**栈是特有的**，其余都是公有的
* 一个线程修改了内存区，别的线程也对该区域可见

## 线程终止

### 被动终止

* 调用`exit`函数杀死了线程所属的进程
* 其余线程调用`pthread_cancel`取消某个进程

### 主动终止

* 执行return返回
* 自己调用`pthread_exit`

## 线程的连接 

等待某一个线程结束之后再去执行某个任务

```c
include <pthread.h>
int pthread_join(pthread_t thread, void **retval);
```

- thread(输入参数)，指定我们希望等待的线程
- retval(输出参数)，我们等待的线程终止时的返回值，就是在线程入口函数中 return 的值或者调用 `pthread_exit` 函数的参数

**注意:对于一个已经被连接过的线程再次执行连接操作， 将会导致无法预知的行为！**

如果线程终止了，但是没有别的线程和其连接，这个线程的资源无法被回收，将会成为僵尸进程。

## 线程的分离

保证线程终止之后，该线程对应的资源可以被回收

```c
#include <pthread.h>
int pthread_detach(pthread_t thread);
```

- thread(输入参数)，指定希望执行分离操作的线程

**注意：一个线程如果已经被分离了，那么我们就无法再去连接它了！**